{"version":3,"file":"static/js/147.c989a710.chunk.js","mappings":"oOA0HA,UA9GA,WACE,IAAOA,GAASC,EAAAA,EAAAA,KAATD,MACPE,GAA0BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/BI,EAAKF,EAAA,GAAEG,EAAQH,EAAA,GACtBI,GAAgCL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAArCE,EAAQD,EAAA,GAAEE,EAAWF,EAAA,GAC5BG,GAA8CT,EAAAA,EAAAA,UAAS,IAAGU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAAnDE,EAAeD,EAAA,GAAEE,EAAkBF,EAAA,GAC1CG,GAAwBb,EAAAA,EAAAA,UAAS,IAAGc,GAAAZ,EAAAA,EAAAA,GAAAW,EAAA,GAA7BE,EAAID,EAAA,GAAEE,EAAOF,EAAA,GACpBG,GAA0BjB,EAAAA,EAAAA,UAAS,IAAGkB,GAAAhB,EAAAA,EAAAA,GAAAe,EAAA,GAA/BE,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GACtBG,GAAoCrB,EAAAA,EAAAA,WAAS,GAAMsB,GAAApB,EAAAA,EAAAA,GAAAmB,EAAA,GAA5CE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAChCG,GAAoCzB,EAAAA,EAAAA,WAAS,GAAM0B,GAAAxB,EAAAA,EAAAA,GAAAuB,EAAA,GAA5CE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAChCG,GAAkC7B,EAAAA,EAAAA,WAAS,GAAM8B,GAAA5B,EAAAA,EAAAA,GAAA2B,EAAA,GAA1CE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAC9BG,GAAoCjC,EAAAA,EAAAA,WAAS,GAAMkC,GAAAhC,EAAAA,EAAAA,GAAA+B,EAAA,GAA5CE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAChCG,GAAoCrC,EAAAA,EAAAA,WAAS,GAAMsC,GAAApC,EAAAA,EAAAA,GAAAmC,EAAA,GAA5CE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAChCG,GAA8BzC,EAAAA,EAAAA,WAAS,GAAM0C,GAAAxC,EAAAA,EAAAA,GAAAuC,EAAA,GAAtCE,EAAOD,EAAA,GAAEE,GAAUF,EAAA,GAC1BG,IAA8B7C,EAAAA,EAAAA,WAAS,GAAM8C,IAAA5C,EAAAA,EAAAA,GAAA2C,GAAA,GAAtCE,GAAOD,GAAA,GAAEE,GAAUF,GAAA,GAC1BG,IAA8BjD,EAAAA,EAAAA,WAAS,GAAMkD,IAAAhD,EAAAA,EAAAA,GAAA+C,GAAA,GAAtCE,GAAOD,GAAA,GAAEE,GAAUF,GAAA,GACpBG,IAAWC,EAAAA,EAAAA,MACVC,IAAiBC,EAAAA,EAAAA,KAAjBD,cACDE,IAAUC,EAAAA,EAAAA,KAAMC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,UAC/BC,IAAeC,EAAAA,EAAAA,GAA+BL,IAEhDM,GAAY,SACZC,GAAY,SACZC,GAAS,SACTC,GAAS,MAqCb,OAnCI3D,EAAS4D,MAAMJ,MAAe5B,EAAaC,GAAc,IAAgB7B,EAAS4D,MAAMJ,KAAc5B,GAAYC,GAAc,GAChI7B,EAAS4D,MAAMH,MAAezB,EAAaC,GAAc,IAAgBjC,EAAS4D,MAAMH,KAAczB,GAAYC,GAAc,GAChIjC,EAAS4D,MAAMF,MAAYtB,EAAUC,IAAW,IAAgBrC,EAAS4D,MAAMF,KAAWtB,GAASC,IAAW,GAC9GrC,EAAS4D,MAAMD,MAAYnB,GAAUC,IAAW,IAAgBzC,EAAS4D,MAAMD,KAAWnB,IAASC,IAAW,GAC9GzC,EAAS6D,QAAU,IAAM7C,EAAaC,GAAc,GAAcjB,EAAS6D,OAAS,GAAK7C,GAAYC,GAAc,GAC/D,SAApDrB,EAAMkE,UAAUlE,EAAMiE,OAAS,EAAGjE,EAAMiE,SAAuBzC,EAA6F,SAApDxB,EAAMkE,UAAUlE,EAAMiE,OAAS,EAAGjE,EAAMiE,SAAsBzC,GAAYC,GAAc,GAApHA,GAAc,GAC7E,KAAbrB,GAAuC,KAApBI,GAA0BJ,IAAaI,GAAoBoB,EAAoD,KAAbxB,GAAuC,KAApBI,GAA0BJ,IAAaI,GAAmBoB,GAAWC,GAAa,GAAjIA,GAAa,GACtGT,GAAcI,GAAcI,GAAaI,GAAcI,GAAcI,GAAWI,SAAmBuB,IAARvD,IAAsBoC,GAAUC,IAAW,GAAiB7B,GAAeI,GAAeI,GAAaI,GAAeI,GAAeI,GAAWI,KAAYI,IAAUC,IAAW,IA6B9QmB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,SAAQC,UACrBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,aACHtD,IAASoD,EAAAA,EAAAA,KAAA,OAAKC,UAAU,cAAaC,SAAEtD,KACxCuD,EAAAA,EAAAA,MAAA,QAAMC,SA/BK,SAAAC,GACfA,EAAEC,iBACFzD,EAAS,KAET0D,EAAAA,EAAAA,IAA+BC,EAAAA,GAAM5E,EAAOI,GAC3CyE,MAAK,WACJC,QAAQC,IAAI,mBACZrB,GAAasB,OAAO,CAClBpE,KAAMA,EACNqE,KAAM,IACNC,gBAAiB,IAAIC,KACrBC,IAAKR,EAAAA,GAAAA,YAAAA,OAGPS,EAAAA,EAAAA,IAAsBT,EAAAA,GAAAA,aACrBC,MAAK,WACJzB,IAAc,GACdF,GAAS,gBACX,IAAGoC,OAAM,SAACC,GAAG,OAAKC,MAAMD,EAAIE,QAAQ,GACtC,IACCH,OAAM,SAAAC,GAAG,OAAItE,GAASyE,EAAAA,EAAAA,IAAoBH,EAAIE,SAAS,IACxDxF,EAAS,IACTI,EAAY,IACZI,EAAmB,GACrB,EAOgCkF,KAAK,oBAAmBrB,SAAA,EAChDF,EAAAA,EAAAA,KAAA,SACEwB,KAAK,QACLC,MAAO7F,EACP8F,YAAY,mBACZC,UAAQ,EACRC,SAAU,SAAAvB,GAAC,OAAIxE,EAASwE,EAAEwB,OAAOJ,MAAM,KAEzCzB,EAAAA,EAAAA,KAAA,SACEwB,KAAK,WACLC,MAAOzF,EACP2F,UAAQ,EACRD,YAAY,sBACZE,SAAU,SAAAvB,GAAC,OAAIpE,EAAYoE,EAAEwB,OAAOJ,MAAM,KAE1CzB,EAAAA,EAAAA,KAAA,SACAwB,KAAK,WACLC,MAAOrF,EACPuF,UAAQ,EACRD,YAAY,mBACZE,SAAU,SAAAvB,GAAC,OAAIhE,EAAmBgE,EAAEwB,OAAOJ,MAAM,KAEjDtB,EAAAA,EAAAA,MAAA,UAAQwB,UAAQ,EAACC,SAAU,SAAAvB,GAAM5D,EAAQ4D,EAAEwB,OAAOJ,MAAM,EAAEvB,SAAA,EAC1DF,EAAAA,EAAAA,KAAA,UAAAE,SAAQ,uBACKH,IAAVzE,GAAuBA,EAAMwG,KAAI,SAAAC,GAAO,OACnC/B,EAAAA,EAAAA,KAAA,UAAAE,SAA4B6B,EAAQvF,MAAvBuF,EAAQvF,KAA6B,QAG9DwD,EAAAA,EAAAA,KAAA,UAAQgC,UAAWpD,GAAS4C,KAAK,SAASS,GAAG,iBAAgB/B,SAAC,cACzD9C,IAAc4C,EAAAA,EAAAA,KAAA,KAAGkC,MAAO,CAACC,MAAO,MAAOC,OAAQ,GAAGlC,SAAC,wCACnDlD,IAAcgD,EAAAA,EAAAA,KAAA,KAAGkC,MAAO,CAACC,MAAO,MAAOC,OAAQ,GAAGlC,SAAC,6CACnDlC,IAAcgC,EAAAA,EAAAA,KAAA,KAAGkC,MAAO,CAACC,MAAO,MAAOC,OAAQ,GAAGlC,SAAC,wDACnDtC,IAAcoC,EAAAA,EAAAA,KAAA,KAAGkC,MAAO,CAACC,MAAO,MAAOC,OAAQ,GAAGlC,SAAC,uDACnD9B,IAAW4B,EAAAA,EAAAA,KAAA,KAAGkC,MAAO,CAACC,MAAO,MAAOC,OAAQ,GAAGlC,SAAC,8CAChD1B,KAAWwB,EAAAA,EAAAA,KAAA,KAAGkC,MAAO,CAACC,MAAO,MAAOC,OAAQ,GAAGlC,SAAC,8CAChD1C,IAAawC,EAAAA,EAAAA,KAAA,KAAGkC,MAAO,CAACC,MAAO,MAAOC,OAAQ,GAAGlC,SAAC,8BAC1CH,IAATvD,IAAsBwD,EAAAA,EAAAA,KAAA,KAAGkC,MAAO,CAACC,MAAO,MAAOC,OAAQ,GAAGlC,SAAC,6BAC7DF,EAAAA,EAAAA,KAAA,QAAAE,UAAMF,EAAAA,EAAAA,KAAA,KAAGqC,KAAK,SAASH,MAAO,CAACI,eAAgB,OAAQH,MAAO,WAAWjC,SAAC,kCAC1EF,EAAAA,EAAAA,KAAA,QAAAE,UAAMF,EAAAA,EAAAA,KAAA,KAAGqC,KAAK,iBAAiBH,MAAO,CAACI,eAAgB,OAAQH,MAAO,WAAWjC,SAAC,+BAK5F,C","sources":["Register.js"],"sourcesContent":["import { useState} from 'react'\nimport 'css/forms.css'\nimport {auth, db} from 'lib/firebase'\nimport {useNavigate} from 'react-router-dom'\nimport {createUserWithEmailAndPassword, sendEmailVerification} from 'firebase/auth'\nimport {useAuthValue} from './AuthContext'\nimport { handleFirebaseError } from 'lib/firebase'\nimport { collection, query } from \"firebase/firestore\"\nimport { useFirestoreCollectionMutation} from '@react-query-firebase/firestore'\nimport { useVisitors } from 'VisitorContext'\n\n\nfunction Register() {\n  const {bases} = useVisitors()\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [base, setBase] = useState('')\n  const [error, setError] = useState('')\n  const [longEnough, setLongEnough] = useState(false)\n  const [validEmail, setValidEmail] = useState(false)\n  const [passMatch, setPassMatch] = useState(false)\n  const [lowerCaseV, setLowerCaseV] = useState(false)\n  const [upperCaseV, setUpperCaseV] = useState(false)\n  const [numberV, setNumberV] = useState(false)\n  const [symbolV, setSymbolV] = useState(false)\n  const [isValid, setisValid] = useState(false)\n  const navigate = useNavigate()\n  const {setTimeActive} = useAuthValue()\n  const userRef = query(collection(db, \"users\"))\n  const userMutation = useFirestoreCollectionMutation(userRef)\n\n  var lowerCase = /[a-z]/g\n  var upperCase = /[A-Z]/g\n  var number = /[0-9]/g\n  var symbol = /\\W/g\n\n  if (password.match(lowerCase) && !lowerCaseV) {setLowerCaseV(true)}else if (!password.match(lowerCase) && lowerCaseV){setLowerCaseV(false)}\n  if (password.match(upperCase) && !upperCaseV) {setUpperCaseV(true)}else if (!password.match(upperCase) && upperCaseV){setUpperCaseV(false)}\n  if (password.match(number) && !numberV) {setNumberV(true)}else if (!password.match(number) && numberV){setNumberV(false)}\n  if (password.match(symbol) && !symbolV) {setSymbolV(true)}else if (!password.match(symbol) && symbolV){setSymbolV(false)}\n  if (password.length >= 8 && !longEnough) {setLongEnough(true)}else if(password.length < 8 && longEnough){setLongEnough(false)}\n  if (email.substring(email.length - 4, email.length) === \".mil\" && !validEmail) {setValidEmail(true)}else if(email.substring(email.length - 4, email.length) !== \".mil\" && validEmail){setValidEmail(false)}\n  if (password !== '' && confirmPassword !== '' && password === confirmPassword && !passMatch){setPassMatch(true)}else if (password !== '' && confirmPassword !== '' && password !== confirmPassword && passMatch){setPassMatch(false)}\n  if (longEnough && validEmail && passMatch && lowerCaseV && upperCaseV && numberV && symbolV && base!== undefined && !isValid) {setisValid(true)}else if ((!longEnough || !validEmail || !passMatch|| !lowerCaseV || !upperCaseV || !numberV|| !symbolV) && isValid) {setisValid(false)}\n\n  const register = e => {\n    e.preventDefault()\n    setError('')\n      // Create a new user with email and password using firebase\n    createUserWithEmailAndPassword(auth, email, password)\n    .then(() => {\n      console.log(\"#WROTE DATABASE\")\n      userMutation.mutate({\n        base: base,\n        area: \"*\",\n        lastChangedBase: new Date(),\n        uid: auth.currentUser.uid,\n      }\n      )\n      sendEmailVerification(auth.currentUser)   \n      .then(() => {\n        setTimeActive(true)\n        navigate('/verify-email')\n      }).catch((err) => alert(err.message))\n    })\n    .catch(err => setError(handleFirebaseError(err.message)))\n    setEmail('')\n    setPassword('')\n    setConfirmPassword('')\n  }\n\n  return (\n    <div className='center'>\n      <div className='auth'>\n        <h1>Register</h1>\n        {error && <div className='auth__error'>{error}</div>}\n        <form onSubmit={register} name='registration_form'>\n          <input \n            type='email' \n            value={email}\n            placeholder=\"Enter your email\"\n            required\n            onChange={e => setEmail(e.target.value)}/>\n\n          <input \n            type='password'\n            value={password} \n            required\n            placeholder='Enter your password'\n            onChange={e => setPassword(e.target.value)}/>\n\n            <input \n            type='password'\n            value={confirmPassword} \n            required\n            placeholder='Confirm password'\n            onChange={e => setConfirmPassword(e.target.value)}/>\n            \n            <select required onChange={e => {setBase(e.target.value)}}>\n            <option>Select Base..</option>\n              {bases !== undefined && bases.map(docSnap => \n                    <option key={docSnap.base}>{docSnap.base}</option>\n                  )}\n            </select>\n        <button disabled={!isValid} type='submit' id='registerButton'>Register</button>\n          { !validEmail && <p style={{color: 'red', margin: 0}}>You must use a .mil email address!</p>}\n          { !longEnough && <p style={{color: 'red', margin: 0}}>Password must be at least 8 characters!</p>}\n          { !upperCaseV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 uppercase letter!</p>}\n          { !lowerCaseV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 lowercase letter</p>}\n          { !numberV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 number!</p>}\n          { !symbolV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 symbol!</p>}\n          { !passMatch && <p style={{color: 'red', margin: 0}}>Password must match!</p>}\n          { base === undefined && <p style={{color: 'red', margin: 0}}>You must select a Base!</p>}\n          <span><a href='/login' style={{textDecoration: \"none\", color: \"#1976d2\"}}>Login to existing Account </a></span>\n          <span><a href='/register-base' style={{textDecoration: \"none\", color: \"#1976d2\"}}>Register New Base</a></span>\n        </form>  \n      </div>\n    </div>\n  )\n}\n\nexport default Register"],"names":["bases","useVisitors","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","confirmPassword","setConfirmPassword","_useState7","_useState8","base","setBase","_useState9","_useState10","error","setError","_useState11","_useState12","longEnough","setLongEnough","_useState13","_useState14","validEmail","setValidEmail","_useState15","_useState16","passMatch","setPassMatch","_useState17","_useState18","lowerCaseV","setLowerCaseV","_useState19","_useState20","upperCaseV","setUpperCaseV","_useState21","_useState22","numberV","setNumberV","_useState23","_useState24","symbolV","setSymbolV","_useState25","_useState26","isValid","setisValid","navigate","useNavigate","setTimeActive","useAuthValue","userRef","query","collection","db","userMutation","useFirestoreCollectionMutation","lowerCase","upperCase","number","symbol","match","length","substring","undefined","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","createUserWithEmailAndPassword","auth","then","console","log","mutate","area","lastChangedBase","Date","uid","sendEmailVerification","catch","err","alert","message","handleFirebaseError","name","type","value","placeholder","required","onChange","target","map","docSnap","disabled","id","style","color","margin","href","textDecoration"],"sourceRoot":""}