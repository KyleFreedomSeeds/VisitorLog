"use strict";(self.webpackChunkvisitor_log=self.webpackChunkvisitor_log||[]).push([[147],{5147:function(e,t,s){s.r(t);var r=s(9439),n=s(2791),a=(s(8383),s(2998)),i=s(7689),o=s(6298),l=s(1971),u=s(2481),c=s(28),d=s(5e3),h=s(184);t.default=function(){var e=(0,n.useState)(""),t=(0,r.Z)(e,2),s=t[0],m=t[1],g=(0,n.useState)(""),p=(0,r.Z)(g,2),f=p[0],x=p[1],j=(0,n.useState)(""),b=(0,r.Z)(j,2),v=b[0],S=b[1],y=(0,n.useState)(""),w=(0,r.Z)(y,2),Z=w[0],A=w[1],D=(0,n.useState)(),C=(0,r.Z)(D,2),B=C[0],E=C[1],P=(0,n.useState)(""),I=(0,r.Z)(P,2),R=I[0],_=I[1],k=(0,n.useState)(!1),q=(0,r.Z)(k,2),N=q[0],O=q[1],T=(0,n.useState)(!1),J=(0,r.Z)(T,2),U=J[0],W=J[1],Y=(0,n.useState)(!1),z=(0,r.Z)(Y,2),F=z[0],K=z[1],L=(0,n.useState)(!1),X=(0,r.Z)(L,2),$=X[0],G=X[1],H=(0,n.useState)(!1),M=(0,r.Z)(H,2),Q=M[0],V=M[1],ee=(0,n.useState)(!1),te=(0,r.Z)(ee,2),se=te[0],re=te[1],ne=(0,n.useState)(!1),ae=(0,r.Z)(ne,2),ie=ae[0],oe=ae[1],le=(0,n.useState)(!1),ue=(0,r.Z)(le,2),ce=ue[0],de=ue[1],he=(0,i.s0)(),me=(0,l.S)().setTimeActive,ge=(0,u.IO)((0,u.hJ)(a.db,"users")),pe=(0,c.b)(ge),fe=/[a-z]/g,xe=/[A-Z]/g,je=/[0-9]/g,be=/\W/g;return f.match(fe)&&!$?G(!0):!f.match(fe)&&$&&G(!1),f.match(xe)&&!Q?V(!0):!f.match(xe)&&Q&&V(!1),f.match(je)&&!se?re(!0):!f.match(je)&&se&&re(!1),f.match(be)&&!ie?oe(!0):!f.match(be)&&ie&&oe(!1),f.length>=8&&!N?O(!0):f.length<8&&N&&O(!1),".mil"!==s.substring(s.length-4,s.length)||U?".mil"!==s.substring(s.length-4,s.length)&&U&&W(!1):W(!0),""===f||""===v||f!==v||F?""!==f&&""!==v&&f!==v&&F&&K(!1):K(!0),N&&U&&F&&$&&Q&&se&&ie&&void 0!==Z&&!ce?de(!0):N&&U&&F&&$&&Q&&se&&ie||!ce||de(!1),(0,n.useEffect)((function(){console.log("#READ DATABASE");var e=(0,u.IO)((0,u.hJ)(a.db,"DODAACS"));(0,d.BS)(e,{idField:"id"}).subscribe((function(e){return E(e.reduce((function(e,t){return e.some((function(e){return e.base===t.base}))||e.push(t),e}),[]))}))}),[]),(0,h.jsx)("div",{className:"center",children:(0,h.jsxs)("div",{className:"auth",children:[(0,h.jsx)("h1",{children:"Register"}),R&&(0,h.jsx)("div",{className:"auth__error",children:R}),(0,h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_(""),(0,o.Xb)(a.I8,s,f).then((function(){console.log("#WROTE DATABASE"),pe.mutate({base:Z,area:"*",lastChangedBase:new Date,uid:a.I8.currentUser.uid}),(0,o.w$)(a.I8.currentUser).then((function(){me(!0),he("/verify-email")})).catch((function(e){return alert(e.message)}))})).catch((function(e){return _((0,a.DK)(e.message))})),m(""),x(""),S("")},name:"registration_form",children:[(0,h.jsx)("input",{type:"email",value:s,placeholder:"Enter your email",required:!0,onChange:function(e){return m(e.target.value)}}),(0,h.jsx)("input",{type:"password",value:f,required:!0,placeholder:"Enter your password",onChange:function(e){return x(e.target.value)}}),(0,h.jsx)("input",{type:"password",value:v,required:!0,placeholder:"Confirm password",onChange:function(e){return S(e.target.value)}}),(0,h.jsxs)("select",{required:!0,onChange:function(e){A(e.target.value)},children:[(0,h.jsx)("option",{children:"Select Base.."}),void 0!==B&&B.map((function(e){return(0,h.jsx)("option",{children:e.base},e.base)}))]}),(0,h.jsx)("button",{disabled:!ce,type:"submit",id:"registerButton",children:"Register"}),!U&&(0,h.jsx)("p",{style:{color:"red",margin:0},children:"You must use a .mil email address!"}),!N&&(0,h.jsx)("p",{style:{color:"red",margin:0},children:"Password must be at least 8 characters!"}),!Q&&(0,h.jsx)("p",{style:{color:"red",margin:0},children:"Password must contain at least 1 uppercase letter!"}),!$&&(0,h.jsx)("p",{style:{color:"red",margin:0},children:"Password must contain at least 1 lowercase letter"}),!se&&(0,h.jsx)("p",{style:{color:"red",margin:0},children:"Password must contain at least 1 number!"}),!ie&&(0,h.jsx)("p",{style:{color:"red",margin:0},children:"Password must contain at least 1 symbol!"}),!F&&(0,h.jsx)("p",{style:{color:"red",margin:0},children:"Password must match!"}),void 0===Z&&(0,h.jsx)("p",{style:{color:"red",margin:0},children:"You must select a Base!"}),(0,h.jsx)("span",{children:(0,h.jsx)("a",{href:"/login",style:{textDecoration:"none",color:"#1976d2"},children:"Login to existing Account "})}),(0,h.jsx)("span",{children:(0,h.jsx)("a",{href:"/register-base",style:{textDecoration:"none",color:"#1976d2"},children:"Register New Base"})})]})]})})}},8383:function(){}}]);
//# sourceMappingURL=147.defe2198.chunk.js.map