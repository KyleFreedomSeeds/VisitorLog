{"version":3,"file":"static/js/835.0eb9b118.chunk.js","mappings":"0NA6EA,UApEA,WAEE,IAAAA,GAA0BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/BI,EAAKF,EAAA,GAAEG,EAAQH,EAAA,GAChBI,GAAWC,EAAAA,EAAAA,MACjBC,QAAQC,IAAI,kBACZ,IAAMC,GAAMC,EAAAA,EAAAA,KAAMC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,YAC3BC,GAAUC,EAAAA,EAAAA,IAAsB,CAAC,WAAYL,EAAI,CAACM,WAAW,IAC7DC,GAAiBC,EAAAA,EAAAA,GAA+BR,GACtDS,GAAyCC,EAAAA,EAAAA,MAAjCC,EAAQF,EAARE,SAAUC,EAAKH,EAALG,MAAOC,EAAYJ,EAAZI,aA0BzB,OACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,SAAQC,UACrBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,wBACHtB,IAASoB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,cAAaC,SAAEtB,KACxCuB,EAAAA,EAAAA,MAAA,QAAMC,SAAUL,GA5BtB,SAAwBM,GACtBxB,EAAS,IACT,IAAMyB,EAAe,uBAAuBC,KAAKF,EAAKG,QAClDF,EAAaG,QAAUH,EAAa,IAAKzB,EAAS,oDACtDS,EAAQe,KAAKK,KAAI,SAAAF,GAIf,OAHIA,EAAOA,SAAWH,EAAKG,QACzB3B,EAAS,0BAEJ,IACT,IACAG,QAAQC,IAAc,KAAVL,GACE,KAAVA,IACFI,QAAQC,IAAI,mBACZQ,EAAekB,OAAO,CACpBC,KAAMP,EAAKO,KAAKC,cAChBL,OAAQH,EAAKG,OAAOK,cACpBC,SAAUT,EAAKS,SAASD,gBAE1B/B,EAAS,UACTgB,IAEJ,IAOoDiB,KAAK,2BAA0Bb,SAAA,EAC3EF,EAAAA,EAAAA,KAAA,SAAAgB,EAAAA,EAAAA,GAAA,CACEC,KAAK,OACLC,GAAG,aACHH,KAAK,aACLI,YAAY,wBACZC,UAAQ,EACRC,UAAW,GACPxB,EAAS,aAEfG,EAAAA,EAAAA,KAAA,SAAAgB,EAAAA,EAAAA,GAAA,CACEC,KAAK,OACLG,UAAQ,EACRD,YAAY,4BACRtB,EAAS,eAEbG,EAAAA,EAAAA,KAAA,SAAAgB,EAAAA,EAAAA,GAAA,CACAC,KAAK,OACLG,UAAQ,EACRD,YAAY,2BACRtB,EAAS,WAEfG,EAAAA,EAAAA,KAAA,UAAQiB,KAAK,SAAQf,SAAC,2BAKhC,C","sources":["RegisterDodaac.js"],"sourcesContent":["import {useState} from 'react'\nimport 'css/forms.css'\nimport { db} from 'lib/firebase'\nimport {useNavigate} from 'react-router-dom'\nimport { collection, query } from \"firebase/firestore\"\nimport { useFirestoreCollectionMutation, useFirestoreQueryData} from '@react-query-firebase/firestore'\nimport { useForm } from 'react-hook-form'\n\n\nfunction RegisterDodaac() {\n\n  const [error, setError] = useState('')\n  const navigate = useNavigate()\n  console.log(\"#READ DATABASE\")\n  const ref = query(collection(db, \"DODAACS\"))\n  const dodaacs = useFirestoreQueryData([\"dodaacs\"], ref,{subscribe: false})\n  const dodaacMutation = useFirestoreCollectionMutation(ref)\n  const { register, reset, handleSubmit} = useForm()\n\n\n  function registerDodaac(data) {\n    setError('')\n    const dodaacFormat = /^[A-Z]{2}[0-9]{4}/gmi.exec(data.dodaac)\n    if (dodaacFormat.input !== dodaacFormat[0]) {setError(\"DODAAC must be in the correct format. ex: FV4852\")}\n    dodaacs.data.map(dodaac => {\n      if (dodaac.dodaac === data.dodaac) {\n        setError(\"DODAAC already exists!\")\n      }\n      return null\n    })\n    console.log(error === '')\n    if (error === '') {\n      console.log(\"#WROTE DATABASE\")\n      dodaacMutation.mutate({\n        base: data.base.toUpperCase(),\n        dodaac: data.dodaac.toUpperCase(),\n        squadron: data.squadron.toUpperCase()\n      })\n      navigate(\"/login\")\n      reset()\n    }\n  }\n\n  return (\n    <div className='center'>\n      <div className='auth'>\n        <h1>Register New Dodaac</h1>\n        {error && <div className='auth__error'>{error}</div>}\n        <form onSubmit={handleSubmit(registerDodaac)} name='dodaac_registration_form'>\n          <input \n            type='text'\n            id=\"formDodaac\"\n            name=\"formDodaac\"\n            placeholder=\"Enter DODAAC (FV4852)\"\n            required\n            maxLength={6}\n            {...register(\"dodaac\")}/>\n            \n          <input \n            type='text'\n            required\n            placeholder='Enter Squadron (57 MUNS)'\n            {...register(\"squadron\")}/>\n\n            <input \n            type='text'\n            required\n            placeholder='Enter Base (Nellis AFB)'\n            {...register(\"base\")}/>\n            \n          <button type='submit'>Register DODAAC</button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default RegisterDodaac"],"names":["_useState","useState","_useState2","_slicedToArray","error","setError","navigate","useNavigate","console","log","ref","query","collection","db","dodaacs","useFirestoreQueryData","subscribe","dodaacMutation","useFirestoreCollectionMutation","_useForm","useForm","register","reset","handleSubmit","_jsx","className","children","_jsxs","onSubmit","data","dodaacFormat","exec","dodaac","input","map","mutate","base","toUpperCase","squadron","name","_objectSpread","type","id","placeholder","required","maxLength"],"sourceRoot":""}