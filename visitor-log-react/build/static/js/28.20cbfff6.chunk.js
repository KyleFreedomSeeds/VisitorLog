"use strict";(self.webpackChunkvisitor_log=self.webpackChunkvisitor_log||[]).push([[28],{28:function(e,n,t){t.d(n,{b:function(){return y},lf:function(){return h}});var r=t(2481),i=t(2791),u=t(1933),o=function(){return o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},o.apply(this,arguments)};function c(e,n,t,r){return new(t||(t=Promise))((function(i,u){function o(e){try{a(r.next(e))}catch(n){u(n)}}function c(e){try{a(r.throw(e))}catch(n){u(n)}}function a(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}a((r=r.apply(e,n||[])).next())}))}function a(e,n){var t,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=n.call(e,o)}catch(c){u=[6,c],r=0}finally{t=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}var l={},s={},f={};function d(e){var n=l[e];n&&"function"===typeof n&&n(),delete l[e],delete f[e]}function v(e,n,t,r){var i,v=this,h=(null===r||void 0===r?void 0:r.queryKeyHashFn)||u.hashQueryKey,y=h(n),b=(0,u.useQueryClient)(),p=function(){return null},w=function(){return null},m=new Promise((function(e,n){p=e,w=n}));if(m.cancel=function(){b.invalidateQueries(e)},null===r||void 0===r?void 0:r.onlyOnce){if(!r.fetchFn)throw new Error("You must specify fetchFn if using onlyOnce mode.");(null===(i=null===r||void 0===r?void 0:r.enabled)||void 0===i||i)&&r.fetchFn().then(p).catch((function(e){w(e)}))}else{if(!!!s[y]){var g=b.getQueryCache();s[y]=g.subscribe((function(n){if(n&&n.query.queryHash===h(e)){var r=n.query,i=n.type;if("queryRemoved"===i&&(delete f[y],function(e){var n=s[e];n&&(n(),delete s[e])}(y),d(y)),"observerAdded"===i||"observerRemoved"===i)if(0===r.getObserversCount())d(y);else if(!!l[y]){var u=b.getQueryData(e);!!f[y]&&p(null!==u&&void 0!==u?u:null)}else l[y]=t((function(n){return c(v,void 0,void 0,(function(){var t;return a(this,(function(r){return null!==(t=f[y])&&void 0!==t||(f[y]=0),f[y]++,1===f[y]?p(n||null):b.setQueryData(e,n),[2]}))}))}))}}))}}return(0,u.useQuery)(o(o({},r),{queryFn:function(){return m},queryKey:e,retry:!1,staleTime:1/0,refetchInterval:void 0,refetchOnMount:!0,refetchOnWindowFocus:!1,refetchOnReconnect:!1}))}function h(e,n,t,u){var l=this;if((null===u||void 0===u?void 0:u.enabled)&&!n)throw new Error("useFirestoreQueryData with key "+JSON.stringify(e)+'  expected to recieve a query or named query, but got "undefined".\n      Did you forget to set the options "enabled" to false?');var s,f,d=!!(null===t||void 0===t?void 0:t.subscribe);void 0===(null===t||void 0===t?void 0:t.subscribe)&&(s=null===t||void 0===t?void 0:t.source),(null===t||void 0===t?void 0:t.subscribe)&&(f=t.includeMetadataChanges);return v(e,["useFirestoreDocument",e],(0,i.useCallback)((function(e){var i=function(){};return n&&p(n).then((function(n){i=(0,r.cf)(n,{includeMetadataChanges:f},(function(n){var r=n.docs.map((function(e){var n,r=e.data({serverTimestamps:null===t||void 0===t?void 0:t.serverTimestamps});return(null===t||void 0===t?void 0:t.idField)?o(o({},r),((n={})[t.idField]=e.id,n)):r}));e(r)}))})),i}),[n,e]),o(o({},u),{onlyOnce:!d,fetchFn:function(){return c(l,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return n?[4,p(n)]:[2,null];case 1:return[4,b(e.sent(),s)];case 2:return[2,e.sent().docs.map((function(e){var n,r=e.data({serverTimestamps:null===t||void 0===t?void 0:t.serverTimestamps});return(null===t||void 0===t?void 0:t.idField)&&(r=o(o({},r),((n={})[t.idField]=e.id,n))),r}))]}}))}))}}))}function y(e,n){return(0,u.useMutation)((function(n){return(0,r.ET)(e,n)}),n)}function b(e,n){return c(this,void 0,void 0,(function(){var t;return a(this,(function(i){switch(i.label){case 0:return"cache"!==n?[3,2]:[4,(0,r.UQ)(e)];case 1:return t=i.sent(),[3,6];case 2:return"server"!==n?[3,4]:[4,(0,r.zN)(e)];case 3:return t=i.sent(),[3,6];case 4:return[4,(0,r.PL)(e)];case 5:t=i.sent(),i.label=6;case 6:return[2,t]}}))}))}function p(e){return c(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return function(e){return"function"===typeof e}(e)?"function"!==typeof e?[3,2]:[4,e()]:[3,3];case 1:return[2,n.sent()];case 2:case 3:return[2,e]}}))}))}}}]);
//# sourceMappingURL=28.20cbfff6.chunk.js.map