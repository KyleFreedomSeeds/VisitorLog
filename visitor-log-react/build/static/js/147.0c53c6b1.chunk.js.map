{"version":3,"file":"static/js/147.0c53c6b1.chunk.js","mappings":"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","sources":["Register.js"],"sourcesContent":["import {useState} from 'react'\nimport 'css/forms.css'\nimport {auth, db} from 'lib/firebase'\nimport {useNavigate} from 'react-router-dom'\nimport {createUserWithEmailAndPassword, sendEmailVerification} from 'firebase/auth'\nimport {useAuthValue} from './AuthContext'\nimport { handleFirebaseError } from 'lib/firebase'\nimport { collection, query } from \"firebase/firestore\"\nimport { useFirestoreQuery, useFirestoreCollectionMutation} from '@react-query-firebase/firestore'\n\n\nfunction Register() {\n\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [dodaac, setDodaac] = useState('')\n  const [error, setError] = useState('')\n  const [longEnough, setLongEnough] = useState(false)\n  const [validEmail, setValidEmail] = useState(false)\n  const [passMatch, setPassMatch] = useState(false)\n  const [lowerCaseV, setLowerCaseV] = useState(false)\n  const [upperCaseV, setUpperCaseV] = useState(false)\n  const [numberV, setNumberV] = useState(false)\n  const [symbolV, setSymbolV] = useState(false)\n  const [isValid, setisValid] = useState(false)\n  const navigate = useNavigate()\n  const {setTimeActive} = useAuthValue()\n  console.log(\"#READ DATABASE\")\n  const ref = query(collection(db, \"DODAACS\"))\n  const dodaacs = useFirestoreQuery([\"dodaacs\"], ref,{subscribe: false})\n  const userRef = query(collection(db, \"users\"))\n  const userMutation = useFirestoreCollectionMutation(userRef)\n\n  var lowerCase = /[a-z]/g\n  var upperCase = /[A-Z]/g\n  var number = /[0-9]/g\n  var symbol = /\\W/g\n\n  if (password.match(lowerCase) && !lowerCaseV) {setLowerCaseV(true)}else if (!password.match(lowerCase) && lowerCaseV){setLowerCaseV(false)}\n  if (password.match(upperCase) && !upperCaseV) {setUpperCaseV(true)}else if (!password.match(upperCase) && upperCaseV){setUpperCaseV(false)}\n  if (password.match(number) && !numberV) {setNumberV(true)}else if (!password.match(number) && numberV){setNumberV(false)}\n  if (password.match(symbol) && !symbolV) {setSymbolV(true)}else if (!password.match(symbol) && symbolV){setSymbolV(false)}\n  if (password.length >= 8 && !longEnough) {setLongEnough(true)}else if(password.length < 8 && longEnough){setLongEnough(false)}\n  if (email.substring(email.length - 4, email.length) === \".mil\" && !validEmail) {setValidEmail(true)}else if(email.substring(email.length - 4, email.length) !== \".mil\" && validEmail){setValidEmail(false)}\n  if (password !== '' && confirmPassword !== '' && password === confirmPassword && !passMatch){setPassMatch(true)}else if (password !== '' && confirmPassword !== '' && password !== confirmPassword && passMatch){setPassMatch(false)}\n  if (longEnough && validEmail && passMatch && lowerCaseV && upperCaseV && numberV && symbolV && dodaac!== '' && !isValid) {setisValid(true)}else if ((!longEnough || !validEmail || !passMatch|| !lowerCaseV || !upperCaseV || !numberV|| !symbolV) && isValid) {setisValid(false)}\n  const register = e => {\n    e.preventDefault()\n    setError('')\n      // Create a new user with email and password using firebase\n    createUserWithEmailAndPassword(auth, email, password)\n    .then(() => {\n      console.log(\"#WROTE DATABASE\")\n      userMutation.mutate({\n        dodaac: dodaac,\n        uid: auth.currentUser.uid}\n      )\n      sendEmailVerification(auth.currentUser)   \n      .then(() => {\n        setTimeActive(true)\n        navigate('/verify-email')\n      }).catch((err) => alert(err.message))\n    })\n    .catch(err => setError(handleFirebaseError(err.message)))\n    setEmail('')\n    setPassword('')\n    setConfirmPassword('')\n  }\n\n  return (\n    <div className='center'>\n      <div className='auth'>\n        <h1>Register</h1>\n        {error && <div className='auth__error'>{error}</div>}\n        <form onSubmit={register} name='registration_form'>\n          <input \n            type='email' \n            value={email}\n            placeholder=\"Enter your email\"\n            required\n            onChange={e => setEmail(e.target.value)}/>\n\n          <input \n            type='password'\n            value={password} \n            required\n            placeholder='Enter your password'\n            onChange={e => setPassword(e.target.value)}/>\n\n            <input \n            type='password'\n            value={confirmPassword} \n            required\n            placeholder='Confirm password'\n            onChange={e => setConfirmPassword(e.target.value)}/>\n            \n            <select required onChange={e => setDodaac(e.target.value)}>\n              {dodaacs.status === \"success\" && dodaacs.data.docs.map(docSnap => \n                    <option key={docSnap.data().dodaac}>{docSnap.data().dodaac}</option>\n                  )}\n            </select>\n        <button disabled={!isValid} type='submit' id='registerButton'>Register</button>\n          { !validEmail && <p style={{color: 'red', margin: 0}}>You must use a .mil email address!</p>}\n          { !longEnough && <p style={{color: 'red', margin: 0}}>Password must be at least 8 characters!</p>}\n          { !upperCaseV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 uppercase letter!</p>}\n          { !lowerCaseV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 lowercase letter</p>}\n          { !numberV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 number!</p>}\n          { !symbolV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 symbol!</p>}\n          { !passMatch && <p style={{color: 'red', margin: 0}}>Password must match!</p>}\n          { dodaac === '' && <p style={{color: 'red', margin: 0}}>You must select a DODAAC!</p>}\n          <span><a href='/login' style={{textDecoration: \"none\", color: \"#1976d2\"}}>Login to existing Account </a></span>\n          <span><a href='/register-dodaac' style={{textDecoration: \"none\", color: \"#1976d2\"}}>Register New Dodaac</a></span>\n        </form>  \n      </div>\n    </div>\n  )\n}\n\nexport default Register"],"names":["_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","confirmPassword","setConfirmPassword","_useState7","_useState8","dodaac","setDodaac","_useState9","_useState10","error","setError","_useState11","_useState12","longEnough","setLongEnough","_useState13","_useState14","validEmail","setValidEmail","_useState15","_useState16","passMatch","setPassMatch","_useState17","_useState18","lowerCaseV","setLowerCaseV","_useState19","_useState20","upperCaseV","setUpperCaseV","_useState21","_useState22","numberV","setNumberV","_useState23","_useState24","symbolV","setSymbolV","_useState25","_useState26","isValid","setisValid","navigate","useNavigate","setTimeActive","useAuthValue","console","log","ref","query","collection","db","dodaacs","useFirestoreQuery","subscribe","userRef","userMutation","useFirestoreCollectionMutation","lowerCase","upperCase","number","symbol","match","length","substring","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","createUserWithEmailAndPassword","auth","then","mutate","uid","sendEmailVerification","catch","err","alert","message","handleFirebaseError","name","type","value","placeholder","required","onChange","target","status","data","docs","map","docSnap","disabled","id","style","color","margin","href","textDecoration"],"sourceRoot":""}