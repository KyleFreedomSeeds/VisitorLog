(self.webpackChunkvisitor_log=self.webpackChunkvisitor_log||[]).push([[198,584],{785:function(e,t,n){"use strict";n.r(t);var r=n(9439),i=n(4506),l=n(2791),s=n(6228),a=n(2481),o=n(2998),c=n(2426),d=n.n(c),u=n(184),m=s.mM.create({row:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#000",borderBottomStyle:"solid",height:25},cell:{borderRightWidth:1,borderRightColor:"#000",borderRightStyle:"solid",borderLeftWidth:1,borderLeftColor:"#000",borderLeftStyle:"solid",paddingTop:1,paddingLeft:2,textAlign:"center"}});t.default=function(e){var t=e.startDate,n=e.endDate,c=e.base,f=(0,l.useState)(void 0),h=(0,r.Z)(f,2),p=h[0],x=h[1];null!==n&&(n=d()(n).endOf("day").toDate());var b="";return null!==t&&null!==n&&(b=(0,a.IO)((0,a.hJ)(o.db,"visitors"),(0,a.ar)("signedOut","!=","null"),(0,a.ar)("base","==",c.base),(0,a.ar)("area","==",c.area),(0,a.ar)("signedOut",">=",t),(0,a.ar)("signedOut","<=",n),(0,a.Xo)("signedOut"))),void 0===p&&null!==t&&null!==n&&((0,a.PL)(b).then((function(e){return x(function(e,t){var n=(0,i.Z)(e).slice(0),r=[];if(0!==n.length){for(;n.length;)r.push(n.splice(0,t));for(;r[r.length-1].length-t!==0;)r[r.length-1][r[r.length-1].length]={filler:""};return r}return Array.from(Array(1),(function(){return new Array(20).fill({filler:""})}))}(e.docs.map((function(e){return e.data()})),20))})),console.log("#READ DATABASE")),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(s.BB,{children:void 0!==p?p.map((function(e){var n;return(0,u.jsx)(s.T3,{orientation:"landscape",children:(0,u.jsxs)(s.G7,{style:{margin:4},children:[(0,u.jsxs)(s.G7,{style:[m.row,{borderTopWidth:1,borderTopColor:"#000",borderTopStyle:"solid"}],children:[(0,u.jsxs)(s.G7,{style:[m.cell,{width:43}],children:[(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8,textAlign:"left"},children:"YEAR"}),(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8,textAlign:"left"},children:d()(t).format("YYYY")})]}),(0,u.jsx)(s.G7,{style:[m.cell,{width:425}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica-Bold",fontSize:10},children:"VISITOR REGISTER LOG"})}),(0,u.jsxs)(s.G7,{style:[m.cell,{width:190}],children:[(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8,textAlign:"left"},children:"ORGANIZATION"}),(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8,textAlign:"left"},children:c.base})]}),(0,u.jsxs)(s.G7,{style:[m.cell,{width:190}],children:[(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8,textAlign:"left"},children:"LOCATION"}),(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8,textAlign:"left"},children:c.area})]})]},"headerRow1"),(0,u.jsxs)(s.G7,{style:{flexDirection:"row",height:15},children:[(0,u.jsxs)(s.G7,{style:[m.cell,{width:43,borderBottom:0}],children:[(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8,textAlign:"left"},children:"MONTH"}),(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8,textAlign:"left"},children:d()(new Date(1e3*(null===(n=e[0])||void 0===n?void 0:n.created.seconds))).format("MMM")})]}),(0,u.jsx)(s.G7,{style:[m.cell,{width:425,borderBottomWidth:1,borderBottomColor:"#000",borderBottomStyle:"solid"}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"VISITOR IDENTIFICATION"})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:190,paddingTop:15}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8,alignItems:"center"},children:"SIGNATURE OF ESCORT"})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:90,paddingTop:15}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"BADGE NUMBER"})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:100,borderBottomWidth:1,borderBottomColor:"#000",borderBottomStyle:"solid"}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"TIME"})})]},"headerRow2"),(0,u.jsxs)(s.G7,{style:m.row,children:[(0,u.jsx)(s.G7,{style:[m.cell,{width:43,flexDirection:"column",textAlign:"left",paddingLeft:0}],children:(0,u.jsxs)(s.G7,{children:[(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"----------------"}),(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"  DAY"})]})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:190,paddingTop:5}],children:(0,u.jsxs)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:["NAME ","\n","(Last, First, Middle Initial)"]})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:45,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"GRADE"})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:190,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"ORGANIZATION OR FIRM"})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:190}]}),(0,u.jsx)(s.G7,{style:[m.cell,{width:90}]}),(0,u.jsx)(s.G7,{style:[m.cell,{width:50,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"IN"})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:50,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"OUT"})})]},"headerRow3"),void 0!==e?e.map((function(e,t){return(0,u.jsxs)(s.G7,{style:m.row,children:[(0,u.jsx)(s.G7,{style:[m.cell,{width:43,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:""!==e.filler?d()(new Date(1e3*e.created.seconds)).format("DD"):null})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:190,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:""!==e.filler?e.name:null})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:45,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:""!==e.filler?e.rank:null})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:190,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:""!==e.filler?e.org:null})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:190,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:""!==e.filler?e.escort:null})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:90,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:""!==e.filler?e.badge:null})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:50,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:""!==e.filler?d()(new Date(1e3*e.created.seconds)).format("h:mm a"):null})}),(0,u.jsx)(s.G7,{style:[m.cell,{width:50,paddingTop:10}],children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:""!==e.filler?d()(new Date(1e3*e.signedOut.seconds)).format("h:mm a"):null})})]},t)})):null,(0,u.jsxs)(s.G7,{style:{flexDirection:"row"},children:[(0,u.jsx)(s.G7,{style:{width:325,paddingLeft:2,paddingTop:1},children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica-Bold",fontSize:10,fontWeight:"bold"},children:"AF IMT 1109, 19990501, V2"})}),(0,u.jsx)(s.G7,{style:{width:190,paddingLeft:2,paddingTop:1},children:(0,u.jsx)(s.xv,{style:{fontFamily:"Helvetica",fontSize:8},children:"PREVIOUS EDITIONS ARE OBSOLETE."})})]},"footerRow1")]})},"pages")})):null})})}},3105:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r=n(1413),i=n(9439),l=n(1971),s=n(6298),a=n(2998),o=n(4165),c=n(5861),d=n(28),u=n(2481),m=n(887),f=n(7467),h=(n(7366),n(1695)),p=n(225),x=n(2791),b=n(184);var g=function(e){var t=e.submitPopupOpen,n=e.closeSubmitModal,s=e.setSubmitPopupOpen,g=e.setBarcodePopupOpen,v=e.disabled,y=(0,l.S)().setTimeActive,j=(0,u.hJ)(a.db,"visitors"),S=(0,d.b)(j),w=(0,m.Gc)(),D=w.register,A=w.reset,I=w.handleSubmit,N=w.formState,O=w.getValues,k=w.setValue,B=(0,p.j)(),C=B.visitors,F=B.base,E=(0,x.useState)(["","",""]),T=(0,i.Z)(E,2),Z=T[0],R=T[1],G=(0,i.Z)(Z,3),M=G[0],z=G[1],H=G[2];function V(){return(V=(0,c.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.multiple),y(new Date),document.getElementById("submitNewVisitor").setAttribute("disabled","disabled"),L(t).then((function(e){null!==e&&(console.log("#WROTE DATABASE"),S.mutate({name:t.name.toUpperCase(),rank:t.rank.toUpperCase(),badge:parseInt(t.badge),org:t.org.toUpperCase(),dest:t.dest.toUpperCase(),escort:t.escort.toUpperCase(),created:new Date,signedOut:"null",base:F.base,area:F.area}),t.multiple?(R([t.org,t.dest,t.escort]),n(),g((function(e){return!e})),k("name",""),k("rank",""),k("badge","")):(R(["","",""]),A(),n()),(0,h.Kz)(a.co,"visitor_sign_in")),document.getElementById("submitNewVisitor").removeAttribute("disabled")}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){var n=!1;return e.forEach((function(e){e.name===t&&"null"===e.signedOut&&(n=!0),e.badge===t&&"null"===e.signedOut&&(n=!0)})),n}function L(e){return U.apply(this,arguments)}function U(){return(U=(0,c.Z)((0,o.Z)().mark((function e(t){var n,r,i,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name.toUpperCase(),r=parseInt(t.badge),i=P(C,n),l=P(C,r),!i){e.next=7;break}return alert("There is already a user signed in with this name!"),e.abrupt("return",null);case 7:if(!l){e.next=10;break}return alert("This badge is already signed in!"),e.abrupt("return",null);case 10:return e.abrupt("return","valid");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{disabled:v,id:"manualSubmit",onClick:function(){return s((function(e){return!e}))},children:"Manual Submit"}),(0,b.jsx)(f.Z,{modal:!0,closeOnDocumentClick:!1,open:t,className:"visitors",onOpen:function(){""!==O("name")?document.getElementById("formbadge").focus():document.getElementById("formName").focus()},onClose:function(){A()},children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{children:"New Visitor"}),(0,b.jsx)("button",{id:"closeSubmitVisitor",style:{position:"absolute",top:"10px",right:"10px"},onClick:function(){n(),y(new Date)},children:"X"}),(0,b.jsxs)("form",{onSubmit:I((function(e){!function(e){V.apply(this,arguments)}(e)})),children:[(0,b.jsx)("input",(0,r.Z)({type:"text",name:"formName",id:"formName",required:!0,placeholder:"Full Name"},D("name",{pattern:{value:/^[^0-9]+$/i,message:"Name must not contain numbers!"}}))),N.errors.name&&(0,b.jsx)("label",{className:"error",htmlFor:"formName",children:N.errors.name.message}),(0,b.jsx)("input",(0,r.Z)({type:"text",name:"formRank",id:"formRank",required:!0,placeholder:"Rank"},D("rank"))),(0,b.jsx)("input",(0,r.Z)({type:"number",name:"formBadge",id:"formbadge",required:!0,placeholder:"Badge"},D("badge",{min:{value:1,message:"Value must be greater than 0!"},max:{value:999,message:"Value must be less than 999!"}}))),N.badge&&(0,b.jsx)("label",{className:"error",htmlFor:"formBadge",children:N.badge.message}),(0,b.jsx)("input",(0,r.Z)({type:"text",name:"formOrg",id:"formOrg",required:!0,placeholder:"Organization",defaultValue:M},D("org"))),(0,b.jsx)("input",(0,r.Z)({type:"text",name:"formDest",id:"formDest",required:!0,placeholder:"Destination",defaultValue:z},D("dest"))),(0,b.jsx)("input",(0,r.Z)({type:"text",name:"formEscort",id:"formEscort",required:!0,placeholder:"Escort",defaultValue:H},D("escort",{pattern:{value:/^[A-Za-z]+$/i,message:"Escort must not contain numbers!"}}))),N.escort&&(0,b.jsx)("label",{className:"error",htmlFor:"formEscort",children:N.escort.message}),(0,b.jsxs)("label",{style:{display:"flex",fontSize:"9pt",alignItems:"left"},children:[(0,b.jsx)("input",(0,r.Z)((0,r.Z)({type:"checkbox",name:"formMultiple",id:"formMultiple"},D("multiple")),{},{style:{margin:"0px",marginRight:"1px",width:"5%"}})),"Copy Forward Multi-Personnel Info"]}),(0,b.jsx)("button",{type:"submit",id:"submitNewVisitor",children:"Sign In Personnel"})]})]})})]})};function v(){return(v=(0,c.Z)((0,o.Z)().mark((function e(t,n){var r,i,l,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=t.badge)){e.next=13;break}if(i=function(e,t){var n="";return e.forEach((function(e){e.badge===t&&"null"===e.signedOut&&(n=e.id)})),n},l=parseInt(r),""===(s=i(n,l))){e.next=12;break}return console.log("#WROTE DATABASE"),e.next=9,(0,u.r7)((0,u.JU)(a.db,"visitors",s),{signedOut:new Date});case 9:(0,h.Kz)(a.co,"visitor_sign_out"),e.next=13;break;case 12:alert("This badge is not signed out");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,c.Z)((0,o.Z)().mark((function e(t){var n,r,i,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=(0,u.hJ)(a.db,"DBIDS"),(r={}).name="";""===r.name;)r.name=prompt("Enter full name of personnel");if(null===r.name){e.next=16;break}return console.log("#WROTE DATABASE"),e.next=8,(0,u.ET)(n,{barcode:t,full_name:r.name.toUpperCase()});case 8:return i=e.sent,console.log("#READ DATABASE"),e.next=12,(0,u.QT)(i);case 12:return l=e.sent,e.abrupt("return",l);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){return y.apply(this,arguments)};function S(e){return w.apply(this,arguments)}function w(){return(w=(0,c.Z)((0,o.Z)().mark((function e(t){var n,r,i,l,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},console.log("#READ DATABASE"),r=(0,u.hJ)(a.db,"DBIDS"),i=(0,u.IO)(r,(0,u.ar)("barcode","==",t)),e.next=6,(0,u.PL)(i);case 6:if(0===(l=e.sent).docs.length){e.next=13;break}return n.FMN=l.docs[0].data().full_name,n.Rank="CIV",e.abrupt("return",n);case 13:if(!window.confirm("Barcode unable to be automatically read. Add personnel to global search list?")){e.next=27;break}return e.next=17,j(t);case 17:if(null===(s=e.sent)){e.next=24;break}return n.FMN=s.data().full_name,n.Rank="CIV",e.abrupt("return",n);case 24:case 27:return e.abrupt("return",null);case 25:e.next=28;break;case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=(0,c.Z)((0,o.Z)().mark((function e(t){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.replace("'",""),r={},i={},e.t0=n.charAt(0),e.next="@"===e.t0?6:"N"===e.t0?8:"M"===e.t0?10:"4"===e.t0?12:"1"===e.t0?15:17;break;case 6:return-1!==n.search("ANSI")&&(r.Rank="CIV",(i=n.split(" ")).length<15&&(i=n.split("\r\n")),i.forEach((function(e){switch(e.substring(0,3)){case"DAC":void 0===r.FN&&(r.FN=e.substring(3,e.length));break;case"DAD":void 0===r.MI&&(r.MI=e.substring(3,e.length));break;case"DCS":void 0===r.LN&&(r.LN=e.substring(3,e.length));break;case"DCT":void 0===r.FMN&&(r.FMN=e.substring(3,e.length))}}))),e.abrupt("break",21);case 8:return 89===n.length&&(r.FN=n.substring(15,35).trim(),r.LN=n.substring(35,61).trim(),r.PCC=n.substring(65,66).trim(),r.Rank=n.substring(69,75).trim(),r.MI=n.substring(88,89).trim()),e.abrupt("break",21);case 10:return 99===n.length&&(r.FN=n.substring(16,36).trim(),r.MI=n.substring(36,37).trim(),r.LN=n.substring(37,63).trim(),r.PCC=n.substring(70,71).trim(),"M"===n.substring(80,85).charAt(0)&&(r.Rank=n.substring(74,79).trim()),"M"!==n.substring(80,85).charAt(0)&&(r.Rank=n.substring(79,84).trim())),e.abrupt("break",21);case 12:return 100===n.length&&(r.FN=n.substring(17,37).trim(),r.MI=n.substring(37,38).trim(),r.LN=n.substring(38,64).trim(),r.PCC=n.substring(71,72).trim(),r.Rank=n.substring(75,81).trim()),157===n.length&&(r.FN=n.substring(17,37).trim(),r.MI=n.substring(37,38).trim(),r.LN=n.substring(38,64).trim(),r.PCC=n.substring(128,129).trim(),r.Rank=n.substring(132,138).trim()),e.abrupt("break",21);case 15:return 88===n.length&&(r.FN=n.substring(15,35).trim(),r.LN=n.substring(35,61).trim(),r.PCC=n.substring(65,66).trim(),r.Rank=n.substring(60,66).trim()),e.abrupt("break",21);case 17:return e.next=19,S(t);case 19:return r=e.sent,e.abrupt("return",r);case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=n(2426),I=n.n(A),N=n(9513),O=n.n(N),k=(n(8639),n(2791).useEffect),B=n(2791).useRef;function C(e,t){var n=B(null),r=B(e);return k((function(){r.current=e}),[e]),k((function(){if("number"===typeof t)return n.current=window.setInterval((function(){return r.current()}),t),function(){return window.clearInterval(n.current)}}),[t]),n}var F=function(){var e=new Date,t=(0,l.S)(),n=t.setTimeActive,r=t.timeout,o=t.timeoutWarn,c=(0,x.useState)(0),d=(0,i.Z)(c,2),u=(d[0],d[1]),m=(0,x.useState)("05:00"),h=(0,i.Z)(m,2),p=h[0],g=h[1],v=function(){n(new Date)};return C((function(){u((function(e){return e+1}))}),3e5),C((function(){g(I().utc(r-e).format("mm:ss")),e>=r&&(0,s.w7)(a.I8)}),e>=o?1e3:null),(0,b.jsx)(b.Fragment,{children:e>=o&&(0,b.jsx)("div",{children:(0,b.jsxs)(f.Z,{open:!0,closeOnDocumentClick:!1,closeOnEscape:!1,onClose:v,className:"timeout",children:[(0,b.jsxs)("div",{children:["You will be signed out due to inactivity in ",p]}),(0,b.jsx)("button",{className:"close",onClick:v,children:"Stay Logged In"})]})})})},E=n(6228),T=n(785);var Z=function(e){var t=e.profilePopupOpen,n=e.closeProfile,r=(0,l.S)().setTimeActive,s=(0,p.j)(),d=s.base,m=s.setDodaac,h=s.bases,g=s.userDocs,v=(0,x.useState)(),y=(0,i.Z)(v,2),j=(y[0],y[1]),S=(0,x.useState)(),w=(0,i.Z)(S,2),D=w[0],A=w[1],N=(0,x.useState)(),O=(0,i.Z)(N,2),k=(O[0],O[1]),B=(0,x.useState)(!0),C=(0,i.Z)(B,2),F=C[0],E=C[1],T=function(e){console.log("#READ DATABASE");var t=(0,u.IO)((0,u.hJ)(a.db,"DODAACS"),(0,u.ar)("base","==",e));(0,u.PL)(t).then((function(e){var t=[];e.docs.map((function(e){t.push(e.data())})),A(t)})),I()(1e3*g.data().lastChangedBase.seconds).diff(new Date,"d")<=-90&&E(!1)};function Z(){return(Z=(0,c.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),document.getElementById("profileBase").value!==d.base?(0,u.r7)((0,u.JU)(a.db,"users",g.id),{base:document.getElementById("profileBase").value,area:document.getElementById("profileArea").value,lastChangedBase:new Date}).then((function(e){return m({base:document.getElementById("profileBase").value,area:document.getElementById("profileArea").value})})):(0,u.r7)((0,u.JU)(a.db,"users",g.id),{area:document.getElementById("profileArea").value}).then((function(e){return m({base:d.base,area:document.getElementById("profileArea").value})}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(f.Z,{modal:!0,closeOnDocumentClick:!1,open:t,className:"visitors",onOpen:function(){return T(d.base)},children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{children:"Profile"}),(0,b.jsx)("button",{id:"closeSubmitVisitor",style:{position:"absolute",top:"10px",right:"10px"},onClick:function(){n(),r(new Date)},children:"X"}),(0,b.jsxs)("form",{onSubmit:function(e){return Z.apply(this,arguments)},children:[(0,b.jsx)("p",{style:{fontStyle:"bold"},children:"Base"}),(0,b.jsx)("select",{id:"profileBase",required:!0,onChange:function(e){j(e.target.value),T(e.target.value)},defaultValue:d.base,disabled:F,children:void 0!==h&&h.map((function(e){return(0,b.jsx)("option",{children:e.base},e.base)}))}),(0,b.jsx)("p",{style:{fontSize:"10px"},children:"Note: You must wait at least 90 days between each base change!"}),(0,b.jsx)("p",{style:{fontStyle:"bold"},children:"Area"}),(0,b.jsx)("select",{id:"profileArea",required:!0,onChange:function(e){k(e.target.value)},defaultValue:d.area,children:void 0!==D&&D.map((function(e){return(0,b.jsx)("option",{children:e.area},e.area)}))}),(0,b.jsx)("span",{children:(0,b.jsx)("a",{href:"/register-base",style:{textDecoration:"none",color:"#1976d2",fontSize:"12px"},children:"Register New Area"})}),(0,b.jsx)("button",{type:"submit",id:"submitProfile",children:"Save"})]})]})})})};var R=function(){var e=(0,l.S)(),t=e.currentUser,n=e.setTimeActive,o=(0,p.j)(),c=o.visitors,d=o.visitorsQuery,u=o.base,h=o.userDocs,y=(0,m.cI)(),j=(0,m.cI)(),S=(0,m.cI)(),w=(0,x.useState)(!1),A=(0,i.Z)(w,2),N=A[0],k=A[1],B=(0,x.useState)([null,null]),C=(0,i.Z)(B,2),R=C[0],G=C[1],M=(0,x.useState)(!1),z=(0,i.Z)(M,2),H=z[0],V=z[1],P=(0,x.useState)(!1),L=(0,i.Z)(P,2),U=L[0],Y=L[1],W=(0,x.useState)(!1),q=(0,i.Z)(W,2),_=q[0],J=q[1],X=(0,i.Z)(R,2),K=X[0],Q=X[1],$=t.email.split("."),ee=$[0].charAt(0).toUpperCase()+$[0].slice(1)+" ";return ee=-1===$[1].indexOf("@")?ee+$[1].charAt(0).toUpperCase()+$[1].slice(1):ee+$[1].charAt(0).toUpperCase()+$[1].slice(1,$[1].indexOf("@")),(0,b.jsxs)("div",{className:"body",children:[(0,b.jsxs)("div",{className:"header",children:[(0,b.jsx)("h1",{children:"Visitor Log"}),(0,b.jsxs)("h3",{children:[u.base," -- ","undefined"===h||"*"===(null===h||void 0===h?void 0:h.data().area)?"YOU MUST CONFIGURE AN AREA":u.area]}),(0,b.jsxs)("p",{children:[ee,(0,b.jsx)("span",{onClick:function(){J(!0)},children:"Profile"}),(0,b.jsx)("span",{onClick:function(){d.current.unsubscribe(),(0,s.w7)(a.I8)},children:"Sign Out"})]}),(0,b.jsx)(Z,{profilePopupOpen:_,setProfilePopupOpen:J,closeProfile:function(){return J(!1)}})]}),(0,b.jsxs)("div",{className:"buttons",children:[(0,b.jsx)("button",{disabled:"*"===(null===h||void 0===h?void 0:h.data().area),id:"scanBarcode",onClick:function(){return V((function(e){return!e}))},children:"Scan ID"}),(0,b.jsx)(f.Z,{closeOnDocumentClick:!1,modal:!0,className:"visitors",open:H,onOpen:function(){return document.getElementById("formBarcode").focus()},onClose:function(){return j.reset()},children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{children:"Scan ID"}),(0,b.jsx)("button",{id:"closeBarcode",style:{position:"absolute",top:"10px",right:"10px"},onClick:function(){j.reset(),V(!1),n(new Date)},children:"X"}),(0,b.jsxs)("form",{onSubmit:j.handleSubmit((function(e){null!==e.barcode&&""!==e.barcode&&function(e){return D.apply(this,arguments)}(e.barcode,c).then((function(e){null!==e&&(j.reset(),document.getElementById("closeBarcode").click(),document.getElementById("manualSubmit").click(),"FMN"in e?y.setValue("name",e.FMN):y.setValue("name",e.LN+" "+e.FN+" "+e.MI.substring(0,1)),y.setValue("rank",e.Rank))}))})),children:[(0,b.jsx)("input",(0,r.Z)({type:"text",name:"formBarcode",id:"formBarcode",required:!0,placeholder:"Barcode"},j.register("barcode"))),j.formState.errors.name&&(0,b.jsx)("label",{className:"error",htmlFor:"formBarcode",children:j.formState.errors.name.message}),(0,b.jsx)("button",{type:"submit",id:"submitBarcode",children:"Submit"})]})]})}),(0,b.jsx)(m.RV,(0,r.Z)((0,r.Z)({},y),{},{children:(0,b.jsx)(g,{setBarcodePopupOpen:V,submitPopupOpen:U,closeSubmitModal:function(){return Y(!1)},setSubmitPopupOpen:Y,disabled:"*"===(null===h||void 0===h?void 0:h.data().area)})})),(0,b.jsx)(f.Z,{trigger:(0,b.jsx)("button",{disabled:"*"===(null===h||void 0===h?void 0:h.data().area),children:"Sign Visitor Out"}),modal:!0,closeOnDocumentClick:!1,className:"visitors",onOpen:function(){return document.getElementById("formBadgeOut").focus()},onClose:function(){return S.reset()},children:function(e){return(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{children:"Sign Visitor Out"}),(0,b.jsx)("button",{style:{position:"absolute",top:"10px",right:"10px"},onClick:function(){S.reset(),e(),n(new Date)},children:"X"}),(0,b.jsxs)("form",{onSubmit:S.handleSubmit((function(e){!function(e,t){v.apply(this,arguments)}(e,c),S.reset()})),children:[(0,b.jsx)("input",(0,r.Z)({type:"text",name:"formBadgeOut",id:"formBadgeOut",required:!0,placeholder:"Badge Number"},S.register("badge"))),S.formState.errors.name&&(0,b.jsx)("label",{className:"error",htmlFor:"formBadgeOut",children:S.formState.errors.name.message}),(0,b.jsx)("button",{type:"submit",id:"submitBarcode",children:"Submit"})]})]})}}),(0,b.jsxs)(f.Z,{trigger:(0,b.jsx)("button",{disabled:"*"===(null===h||void 0===h?void 0:h.data().area),children:"Generate 1109"}),children:[(0,b.jsx)(O(),{required:!0,form:"generate1109",placeholderText:"Select 1109 Date Range",selectsRange:!0,onChange:function(e){G(e),k(!1)},startDate:K,endDate:Q,className:"datePicker1109"}),(0,b.jsxs)("form",{id:"generate1109",onSubmit:function(e){return e.preventDefault()},children:[N?(0,b.jsx)("p",{style:{color:"red",fontSize:"10pt"},children:"Please select a date range!"}):null,(0,b.jsx)("button",{id:"button1109",children:(0,b.jsx)(E.WD,{document:(0,b.jsx)(T.default,{startDate:K,endDate:Q,base:u}),fileName:"1109 "+I()(K).format("DD MMM YY")+" - "+I()(Q).format("DD MMM YY"),className:"download1109",onClick:function(e){null!=K&&null!=Q||(k(!0),e.preventDefault())},children:function(e){return e.loading?"Loading..":"Download 1109"}})})]})]}),(0,b.jsx)(F,{})]}),(0,b.jsxs)("div",{className:"table",children:[(0,b.jsxs)("table",{children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Name"}),(0,b.jsx)("th",{children:"Rank"}),(0,b.jsx)("th",{children:"Organization"}),(0,b.jsx)("th",{children:"Destination"}),(0,b.jsx)("th",{children:"Escort"}),(0,b.jsx)("th",{children:"Badge"}),(0,b.jsx)("th",{children:"Signed In At"})]})}),(0,b.jsx)("tbody",{children:void 0!==c&&c.map((function(e){var t=I()(new Date(1e3*e.created.seconds)).format("DD MMM YY h:mm a");return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:e.name}),(0,b.jsx)("td",{children:e.rank}),(0,b.jsx)("td",{children:e.org}),(0,b.jsx)("td",{children:e.dest}),(0,b.jsx)("td",{children:e.escort}),(0,b.jsx)("td",{children:e.badge}),(0,b.jsx)("td",{children:t})]},e.id)}))})]}),void 0===c&&(0,b.jsx)("div",{className:"loading-wheel"})]})]})}},2480:function(){}}]);
//# sourceMappingURL=198.038d6957.chunk.js.map