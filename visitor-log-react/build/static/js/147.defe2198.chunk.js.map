{"version":3,"file":"static/js/147.defe2198.chunk.js","mappings":"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","sources":["Register.js"],"sourcesContent":["import {useEffect, useState} from 'react'\nimport 'css/forms.css'\nimport {auth, db} from 'lib/firebase'\nimport {useNavigate} from 'react-router-dom'\nimport {createUserWithEmailAndPassword, sendEmailVerification} from 'firebase/auth'\nimport {useAuthValue} from './AuthContext'\nimport { handleFirebaseError } from 'lib/firebase'\nimport { collection, query } from \"firebase/firestore\"\nimport { useFirestoreCollectionMutation} from '@react-query-firebase/firestore'\nimport { collectionData } from 'rxfire/firestore'\n\n\nfunction Register() {\n\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [base, setBase] = useState('')\n  const [bases, setBases] = useState()\n  const [error, setError] = useState('')\n  const [longEnough, setLongEnough] = useState(false)\n  const [validEmail, setValidEmail] = useState(false)\n  const [passMatch, setPassMatch] = useState(false)\n  const [lowerCaseV, setLowerCaseV] = useState(false)\n  const [upperCaseV, setUpperCaseV] = useState(false)\n  const [numberV, setNumberV] = useState(false)\n  const [symbolV, setSymbolV] = useState(false)\n  const [isValid, setisValid] = useState(false)\n  const navigate = useNavigate()\n  const {setTimeActive} = useAuthValue()\n  const userRef = query(collection(db, \"users\"))\n  const userMutation = useFirestoreCollectionMutation(userRef)\n\n  var lowerCase = /[a-z]/g\n  var upperCase = /[A-Z]/g\n  var number = /[0-9]/g\n  var symbol = /\\W/g\n\n  if (password.match(lowerCase) && !lowerCaseV) {setLowerCaseV(true)}else if (!password.match(lowerCase) && lowerCaseV){setLowerCaseV(false)}\n  if (password.match(upperCase) && !upperCaseV) {setUpperCaseV(true)}else if (!password.match(upperCase) && upperCaseV){setUpperCaseV(false)}\n  if (password.match(number) && !numberV) {setNumberV(true)}else if (!password.match(number) && numberV){setNumberV(false)}\n  if (password.match(symbol) && !symbolV) {setSymbolV(true)}else if (!password.match(symbol) && symbolV){setSymbolV(false)}\n  if (password.length >= 8 && !longEnough) {setLongEnough(true)}else if(password.length < 8 && longEnough){setLongEnough(false)}\n  if (email.substring(email.length - 4, email.length) === \".mil\" && !validEmail) {setValidEmail(true)}else if(email.substring(email.length - 4, email.length) !== \".mil\" && validEmail){setValidEmail(false)}\n  if (password !== '' && confirmPassword !== '' && password === confirmPassword && !passMatch){setPassMatch(true)}else if (password !== '' && confirmPassword !== '' && password !== confirmPassword && passMatch){setPassMatch(false)}\n  if (longEnough && validEmail && passMatch && lowerCaseV && upperCaseV && numberV && symbolV && base!== undefined && !isValid) {setisValid(true)}else if ((!longEnough || !validEmail || !passMatch|| !lowerCaseV || !upperCaseV || !numberV|| !symbolV) && isValid) {setisValid(false)}\n  \n  useEffect(() => {\n    console.log(\"#READ DATABASE\")\n    const ref = query(collection(db, \"DODAACS\"))\n    //getDocs(ref).then(base => {base.docs.map(doc => setBase(doc.data()))}) WORK UNSUBSCRIBE\n    collectionData(ref, {idField: 'id'}).subscribe(bases => setBases(bases.reduce((unique,o) => {\n      if(!unique.some(obj => obj.base === o.base)) {unique.push(o)} return unique},[])))\n  },[])\n\n  const register = e => {\n    e.preventDefault()\n    setError('')\n      // Create a new user with email and password using firebase\n    createUserWithEmailAndPassword(auth, email, password)\n    .then(() => {\n      console.log(\"#WROTE DATABASE\")\n      userMutation.mutate({\n        base: base,\n        area: \"*\",\n        lastChangedBase: new Date(),\n        uid: auth.currentUser.uid,\n      }\n      )\n      sendEmailVerification(auth.currentUser)   \n      .then(() => {\n        setTimeActive(true)\n        navigate('/verify-email')\n      }).catch((err) => alert(err.message))\n    })\n    .catch(err => setError(handleFirebaseError(err.message)))\n    setEmail('')\n    setPassword('')\n    setConfirmPassword('')\n  }\n\n  return (\n    <div className='center'>\n      <div className='auth'>\n        <h1>Register</h1>\n        {error && <div className='auth__error'>{error}</div>}\n        <form onSubmit={register} name='registration_form'>\n          <input \n            type='email' \n            value={email}\n            placeholder=\"Enter your email\"\n            required\n            onChange={e => setEmail(e.target.value)}/>\n\n          <input \n            type='password'\n            value={password} \n            required\n            placeholder='Enter your password'\n            onChange={e => setPassword(e.target.value)}/>\n\n            <input \n            type='password'\n            value={confirmPassword} \n            required\n            placeholder='Confirm password'\n            onChange={e => setConfirmPassword(e.target.value)}/>\n            \n            <select required onChange={e => {setBase(e.target.value)}}>\n            <option>Select Base..</option>\n              {bases !== undefined && bases.map(docSnap => \n                    <option key={docSnap.base}>{docSnap.base}</option>\n                  )}\n            </select>\n        <button disabled={!isValid} type='submit' id='registerButton'>Register</button>\n          { !validEmail && <p style={{color: 'red', margin: 0}}>You must use a .mil email address!</p>}\n          { !longEnough && <p style={{color: 'red', margin: 0}}>Password must be at least 8 characters!</p>}\n          { !upperCaseV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 uppercase letter!</p>}\n          { !lowerCaseV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 lowercase letter</p>}\n          { !numberV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 number!</p>}\n          { !symbolV && <p style={{color: 'red', margin: 0}}>Password must contain at least 1 symbol!</p>}\n          { !passMatch && <p style={{color: 'red', margin: 0}}>Password must match!</p>}\n          { base === undefined && <p style={{color: 'red', margin: 0}}>You must select a Base!</p>}\n          <span><a href='/login' style={{textDecoration: \"none\", color: \"#1976d2\"}}>Login to existing Account </a></span>\n          <span><a href='/register-base' style={{textDecoration: \"none\", color: \"#1976d2\"}}>Register New Base</a></span>\n        </form>  \n      </div>\n    </div>\n  )\n}\n\nexport default Register"],"names":["_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","confirmPassword","setConfirmPassword","_useState7","_useState8","base","setBase","_useState9","_useState10","bases","setBases","_useState11","_useState12","error","setError","_useState13","_useState14","longEnough","setLongEnough","_useState15","_useState16","validEmail","setValidEmail","_useState17","_useState18","passMatch","setPassMatch","_useState19","_useState20","lowerCaseV","setLowerCaseV","_useState21","_useState22","upperCaseV","setUpperCaseV","_useState23","_useState24","numberV","setNumberV","_useState25","_useState26","symbolV","setSymbolV","_useState27","_useState28","isValid","setisValid","navigate","useNavigate","setTimeActive","useAuthValue","userRef","query","collection","db","userMutation","useFirestoreCollectionMutation","lowerCase","upperCase","number","symbol","match","length","substring","undefined","useEffect","console","log","ref","collectionData","idField","subscribe","reduce","unique","o","some","obj","push","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","createUserWithEmailAndPassword","auth","then","mutate","area","lastChangedBase","Date","uid","sendEmailVerification","catch","err","alert","message","handleFirebaseError","name","type","value","placeholder","required","onChange","target","map","docSnap","disabled","id","style","color","margin","href","textDecoration"],"sourceRoot":""}