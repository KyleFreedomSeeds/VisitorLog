"use strict";(self.webpackChunkvisitor_log=self.webpackChunkvisitor_log||[]).push([[28],{28:function(e,n,t){t.d(n,{b:function(){return b},lf:function(){return y},sQ:function(){return h}});var r=t(2481),u=t(2791),i=t(1933),o=function(){return o=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var u in n=arguments[t])Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u]);return e},o.apply(this,arguments)};function c(e,n,t,r){return new(t||(t=Promise))((function(u,i){function o(e){try{a(r.next(e))}catch(n){i(n)}}function c(e){try{a(r.throw(e))}catch(n){i(n)}}function a(e){var n;e.done?u(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,c)}a((r=r.apply(e,n||[])).next())}))}function a(e,n){var t,r,u,i,o={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(u=2&i[0]?r.return:i[0]?r.throw||((u=r.return)&&u.call(r),0):r.next)&&!(u=u.call(r,i[1])).done)return u;switch(r=0,u&&(i=[2&i[0],u.value]),i[0]){case 0:case 1:u=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(u=(u=o.trys).length>0&&u[u.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!u||i[1]>u[0]&&i[1]<u[3])){o.label=i[1];break}if(6===i[0]&&o.label<u[1]){o.label=u[1],u=i;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(i);break}u[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(c){i=[6,c],r=0}finally{t=u=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var l={},s={},f={};function d(e){var n=l[e];n&&"function"===typeof n&&n(),delete l[e],delete f[e]}function v(e,n,t,r){var u,v=this,h=(null===r||void 0===r?void 0:r.queryKeyHashFn)||i.hashQueryKey,y=h(n),b=(0,i.useQueryClient)(),p=function(){return null},w=function(){return null},m=new Promise((function(e,n){p=e,w=n}));if(m.cancel=function(){b.invalidateQueries(e)},null===r||void 0===r?void 0:r.onlyOnce){if(!r.fetchFn)throw new Error("You must specify fetchFn if using onlyOnce mode.");(null===(u=null===r||void 0===r?void 0:r.enabled)||void 0===u||u)&&r.fetchFn().then(p).catch((function(e){w(e)}))}else{if(!!!s[y]){var g=b.getQueryCache();s[y]=g.subscribe((function(n){if(n&&n.query.queryHash===h(e)){var r=n.query,u=n.type;if("queryRemoved"===u&&(delete f[y],function(e){var n=s[e];n&&(n(),delete s[e])}(y),d(y)),"observerAdded"===u||"observerRemoved"===u)if(0===r.getObserversCount())d(y);else if(!!l[y]){var i=b.getQueryData(e);!!f[y]&&p(null!==i&&void 0!==i?i:null)}else l[y]=t((function(n){return c(v,void 0,void 0,(function(){var t;return a(this,(function(r){return null!==(t=f[y])&&void 0!==t||(f[y]=0),f[y]++,1===f[y]?p(n||null):b.setQueryData(e,n),[2]}))}))}))}}))}}return(0,i.useQuery)(o(o({},r),{queryFn:function(){return m},queryKey:e,retry:!1,staleTime:1/0,refetchInterval:void 0,refetchOnMount:!0,refetchOnWindowFocus:!1,refetchOnReconnect:!1}))}function h(e,n,t,i){var c,a,l=!!(null===t||void 0===t?void 0:t.subscribe);if(void 0===(null===t||void 0===t?void 0:t.subscribe)&&(c=null===t||void 0===t?void 0:t.source),(null===t||void 0===t?void 0:t.subscribe)&&(a=t.includeMetadataChanges),(null===i||void 0===i?void 0:i.enabled)&&!n)throw new Error("useFirestoreQuery with key "+JSON.stringify(e)+'  expected to recieve a query or named query, but got "undefined".\n      Did you forget to set the options "enabled" to false?');return v(e,["useFirestoreDocument",e],(0,u.useCallback)((function(e){var t=function(){};return n&&w(n).then((function(n){t=(0,r.cf)(n,{includeMetadataChanges:a},(function(n){return e(n)}))})),t}),[n,e]),o(o({},i),{onlyOnce:!l,fetchFn:function(){return n?w(n).then((function(e){return p(e,c)})):new Promise((function(e){return e(null)}))}}))}function y(e,n,t,i){var l=this;if((null===i||void 0===i?void 0:i.enabled)&&!n)throw new Error("useFirestoreQueryData with key "+JSON.stringify(e)+'  expected to recieve a query or named query, but got "undefined".\n      Did you forget to set the options "enabled" to false?');var s,f,d=!!(null===t||void 0===t?void 0:t.subscribe);void 0===(null===t||void 0===t?void 0:t.subscribe)&&(s=null===t||void 0===t?void 0:t.source),(null===t||void 0===t?void 0:t.subscribe)&&(f=t.includeMetadataChanges);return v(e,["useFirestoreDocument",e],(0,u.useCallback)((function(e){var u=function(){};return n&&w(n).then((function(n){u=(0,r.cf)(n,{includeMetadataChanges:f},(function(n){var r=n.docs.map((function(e){var n,r=e.data({serverTimestamps:null===t||void 0===t?void 0:t.serverTimestamps});return(null===t||void 0===t?void 0:t.idField)?o(o({},r),((n={})[t.idField]=e.id,n)):r}));e(r)}))})),u}),[n,e]),o(o({},i),{onlyOnce:!d,fetchFn:function(){return c(l,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return n?[4,w(n)]:[2,null];case 1:return[4,p(e.sent(),s)];case 2:return[2,e.sent().docs.map((function(e){var n,r=e.data({serverTimestamps:null===t||void 0===t?void 0:t.serverTimestamps});return(null===t||void 0===t?void 0:t.idField)&&(r=o(o({},r),((n={})[t.idField]=e.id,n))),r}))]}}))}))}}))}function b(e,n){return(0,i.useMutation)((function(n){return(0,r.ET)(e,n)}),n)}function p(e,n){return c(this,void 0,void 0,(function(){var t;return a(this,(function(u){switch(u.label){case 0:return"cache"!==n?[3,2]:[4,(0,r.UQ)(e)];case 1:return t=u.sent(),[3,6];case 2:return"server"!==n?[3,4]:[4,(0,r.zN)(e)];case 3:return t=u.sent(),[3,6];case 4:return[4,(0,r.PL)(e)];case 5:t=u.sent(),u.label=6;case 6:return[2,t]}}))}))}function w(e){return c(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return function(e){return"function"===typeof e}(e)?"function"!==typeof e?[3,2]:[4,e()]:[3,3];case 1:return[2,n.sent()];case 2:case 3:return[2,e]}}))}))}}}]);
//# sourceMappingURL=28.253bb52c.chunk.js.map